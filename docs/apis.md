# Backend API Endpoints Documentation

This document lists all required backend API endpoints for the **Cocoon Rearing Recommender System**, built using **FastAPI + MongoDB + ML models**. Each endpoint is described concisely for development, testing, and viva/reference purposes.

---

## 1. Authentication & User Management

### 1.1 Register User

**Endpoint:** `POST /api/auth/register`

**Description:**
Registers a new user (Farmer or Admin) using email and password. Password is securely hashed and stored in MongoDB.

---

### 1.2 Login User

**Endpoint:** `POST /api/auth/login`

**Description:**
Authenticates user credentials and returns a JWT access token for secured API access.

---

### 1.3 Get Logged-in User Profile

**Endpoint:** `GET /api/auth/me`

**Description:**
Returns basic profile details of the currently authenticated user using the JWT token.

---

## 2. Farmer Profile Management

### 2.1 Create / Update Farmer Profile

**Endpoint:** `POST /api/farmer/profile`

**Description:**
Creates or updates farmer-specific information such as district, experience, and farming details.

---

### 2.2 Get Farmer Profile

**Endpoint:** `GET /api/farmer/profile`

**Description:**
Fetches the farmerâ€™s stored profile information from the database.

---

## 3. Admin Data Management (Market & Weather)

### 3.1 Upload Market & Weather Data

**Endpoint:** `POST /api/admin/market-weather`

**Description:**
Allows admin users to upload or update daily market prices and temperature data used for recommendations.

---

### 3.2 Get Market & Weather Data

**Endpoint:** `GET /api/admin/market-weather`

**Description:**
Retrieves stored market price and weather data for review, validation, or debugging purposes.

---

## 4. Recommendation & ML Prediction

### 4.1 Generate Cocoon Rearing Recommendation

**Endpoint:** `POST /api/recommendation/predict`

**Description:**
Accepts temperature, market price, city, and season as input. Uses trained ML models and rule-based logic to generate the best start date, expected end date, and expected cocoon price. save this prediction in the database.

---

### 4.2 Get Recommendation History

**Endpoint:** `GET /api/recommendation/history`

**Description:**
Returns a list of all previous recommendations generated by the logged-in farmer.

---

## 5. Dashboard & Analytics

### 5.1 Farmer Dashboard Summary

**Endpoint:** `GET /api/dashboard/farmer`

**Description:**
Provides a summary view for farmers, including recent recommendations and key insights.

---

### 5.2 Admin Dashboard Summary

**Endpoint:** `GET /api/dashboard/admin`

**Description:**
Provides administrative insights such as number of users, total recommendations generated, and data upload status.

---

## 6. Utility & System Endpoints

### 6.1 Health Check

**Endpoint:** `GET /api/health`

**Description:**
Checks whether the backend server, database connection, and ML model loading are functioning correctly.

---

## Notes

* All secured endpoints require **JWT authentication**.
* Role-based access control is applied for Farmer and Admin APIs.
* ML models are loaded once at application startup for performance efficiency.

---

**End of Document**
